(this["webpackJsonprefactoring-graph"]=this["webpackJsonprefactoring-graph"]||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},108:function(e,t){},125:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(84),c=a.n(o),s=(a(99),a(100),a(101),a(33)),i=a(53),l=a(5),m=a(35),d=a(36),u=a(85),h=a(21),p=a(43),f=a(24),b=a(54),g=a.n(b),E=[{owner:"apache",project:"dubbo",id:0},{owner:"spring-projects",project:"spring-framework",id:2578},{owner:"quilljs",project:"quill",id:24},{owner:"facebook",project:"react",id:77}],v={},w=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var r;Object(s.a)(this,a),r=t.call(this);var o=g.a.parse(e.location.search);return r.ref=n.a.createRef(),r.draw=r.draw.bind(Object(l.a)(r)),r.renderGraph=r.renderGraph.bind(Object(l.a)(r)),r.renderMenu=r.renderMenu.bind(Object(l.a)(r)),r.renderMenuSummary=r.renderMenuSummary.bind(Object(l.a)(r)),r.renderMenuCommitList=r.renderMenuCommitList.bind(Object(l.a)(r)),r.renderError=r.renderError.bind(Object(l.a)(r)),r.renderExamples=r.renderExamples.bind(Object(l.a)(r)),r.renderToolTip=r.renderToolTip.bind(Object(l.a)(r)),r.readData=r.readData.bind(Object(l.a)(r)),r.selectRandomGraph=r.selectRandomGraph.bind(Object(l.a)(r)),r.createDigraph=r.createDigraph.bind(Object(l.a)(r)),r.createRandomSubgraph=r.createRandomSubgraph.bind(Object(l.a)(r)),r.showGraph=r.showGraph.bind(Object(l.a)(r)),r.state={owner:e.match.params.owner,project:e.match.params.project,id:e.match.params.id,width:r.ref.offsetWidth,height:r.ref.offsetHeight,graph:"digraph refgraph {}",commits_list:[],commits_params:o.commits?o.commits.split(","):[],error:!1,level:"",summary:""},r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.draw()}},{key:"renderToolTip",value:function(){var e=this,t=Object(p.a)(".tooltip-node");Object(p.a)("svg").selectAll("ellipse").on("mouseover",(function(a){t.transition().duration(200).style("opacity",1);var r=a.parent.attributes.target.split("#"),n=r[0].length>40?"...":"",o="".concat(n).concat(r[0].slice(Math.max(-40,-r[0].length)));t.html('\n          <table class="table-borderless table-sm">\n            <tr><td class="td-label"><b>'.concat(e.state.level,': </b></td><td class="td-info">').concat(r[1],'</td></tr>\n            <tr><td class="td-label"><b>Location: </b></td><td class="td-info">').concat(o,"</td></tr>\n          </table>")).style("left",f.c.pageX+window.pageXOffset+"px").style("top",f.c.pageY-window.pageYOffset+"px")})).on("mouseout",(function(e){t.transition().duration(200).style("opacity",0)}))}},{key:"readData",value:function(e){var t=this;h.b().defer(h.a,e).await((function(e,a){e?t.setState({error:!0}):t.setState({developers:a.info.developers,edges:a.info.edges,vertices:a.info.vertices,commits:a.info.commits,agedays:a.info.agedays,refactorings:a.info.refactorings,group:a.info.group,language:a.info.language,level:a.info.level,summary:a.info.summary,commits_list:a.commits_list,graph:t.createDigraph(a.edges),error:!1},(function(){t.renderToolTip()}))}))}},{key:"createDigraph",value:function(e){var t=this,a='digraph "" {ratio="auto"; node [shape=point, width=0.25]; rankdir=LR; ',r="Click to see the commit on GitHub";return e.map((function(e){return a+=' "'.concat(e.before,'" -> "').concat(e.after,'" \n        [color="').concat(t.state.commits_params.includes(e.sha1)?"#ff0000":"#909090",'", label="').concat(e.ref,'", ').concat('fontsize=10, arrowsize=1 fontname="Arial, sans-serif"',', edgehref="https://github.com/').concat(t.state.owner,"/").concat(t.state.project,"/commit/").concat(e.sha1,'", edgetarget="_blank", labeltarget="_blank" edgetooltip="').concat(r,'", labelhref="https://github.com/').concat(t.state.owner,"/").concat(t.state.project,"/commit/").concat(e.sha1,'", labeltooltip="').concat(r,'"\n        ];\n        "').concat(e.before,'"[target="').concat(e.before,'" tooltip=" "]\n        "').concat(e.after,'"[target="').concat(e.after,'" tooltip=" "]\n        ')})),a+="}"}},{key:"draw",value:function(){var e="/data/".concat(this.state.owner,"/").concat(this.state.project,"/subgraph_").concat(this.state.id,".json");this.readData(e)}},{key:"createRandomSubgraph",value:function(){var e=this;Object.keys(v).length?this.selectRandomGraph():h.b().defer(h.a,"/data/subgraphs_overtime_top_2.json").await((function(t,a){t?e.setState({error:!0}):(v=a,e.selectRandomGraph(),e.setState({error:!1}))}))}},{key:"selectRandomGraph",value:function(){var e=Math.floor(20*Math.random()),t=v[e],a=Math.floor(Math.random()*t.ids.length),r=t.ids[a];this.showGraph(t.owner,t.project,r)}},{key:"showGraph",value:function(e,t,a){var r=this;this.setState({owner:e,project:t,id:a},(function(){r.draw(),r.props.history.push("/".concat(r.state.owner,"/").concat(r.state.project,"/").concat(r.state.id))}))}},{key:"renderGraph",value:function(){if(!this.state.error)return n.a.createElement("div",{className:"col col-lg-9 text-center",ref:this.ref},n.a.createElement("div",{className:"graphviz-custom"},n.a.createElement(u.a,{dot:this.state.graph,options:{width:this.state.width,height:this.state.height,zoom:!1}}),n.a.createElement("div",{className:"tooltip-node border border-secondary rounded"})))}},{key:"renderMenuSummary",value:function(){if(!this.state.error&&this.state.summary)return n.a.createElement("div",{className:"card card-summary text-white bg-dark"},n.a.createElement("div",{className:"card-body text-monospace text-center"},n.a.createElement("div",{dangerouslySetInnerHTML:{__html:"<b>Summary:</b> ".concat(this.state.summary," ")}})))}},{key:"renderMenuCommitList",value:function(){var e=this;return n.a.createElement("ul",{className:"list-group list-group-flush ul-bottom border border-secondary rounded ul-custom"},n.a.createElement("li",{className:"list-group-item border-0 li-custom",title:"Number of commits used in this subgraph"},n.a.createElement("i",{className:"fa fa-code-branch fa-fw","aria-hidden":"true"}),"\xa0 Commits used in this subgraph: ",this.state.commits),this.state.commits_list.map((function(t,a){return n.a.createElement("a",{key:a,href:"https://github.com/".concat(e.state.owner,"/").concat(e.state.project,"/commit/").concat(t),target:"_blank",rel:"noopener noreferrer"},n.a.createElement("li",{className:"list-group-item li-custom"},t))})))}},{key:"renderMenu",value:function(){if(!this.state.error)return n.a.createElement("div",{className:"col col-lg-3"},n.a.createElement("ul",{className:"list-group list-group-flush border border-secondary rounded ul-custom"},n.a.createElement("li",{className:"list-group-item border-0 li-custom text-center",title:"Plot a random refactoring subgraph"},n.a.createElement("button",{onClick:this.createRandomSubgraph,type:"button",className:"btn btn-sm btn-dark button-random"},"Random subgraph \xa0",n.a.createElement("i",{className:"fas fa-random fa-fw mx-auto","aria-hidden":"true"}))),n.a.createElement("li",{className:"list-group-item border-0 li-custom",title:"Subgraph ID"},n.a.createElement("i",{className:"fas fa-info-circle","aria-hidden":"true"}),"\xa0 Subgraph #",this.state.id),n.a.createElement("li",{className:"list-group-item border-0 li-custom",title:"GitHub Project"},n.a.createElement("i",{className:"fab fa-github fa-fw mx-auto","aria-hidden":"true"}),"\xa0 ",n.a.createElement("a",{href:"https://github.com/".concat(this.state.owner,"/").concat(this.state.project),target:"_blank",rel:"noopener noreferrer"},this.state.owner,"/",this.state.project),"                   "),n.a.createElement("li",{className:"list-group-item border-0 li-custom",title:"Language"},n.a.createElement("i",{className:"far fa-file-code fa-fw","aria-hidden":"true"}),"\xa0 ",this.state.language),n.a.createElement("li",{className:"list-group-item border-0 li-custom",title:"Number of vertices"},n.a.createElement("i",{className:"fa fa-ellipsis-h fa-fw","aria-hidden":"true"}),"\xa0 Vertices: ",this.state.vertices),n.a.createElement("li",{className:"list-group-item border-0 li-custom",title:"Number of edges"},n.a.createElement("i",{className:"fa fa-exchange-alt fa-fw","aria-hidden":"true"}),"\xa0 Edges: ",this.state.edges),n.a.createElement("li",{className:"list-group-item border-0 li-custom",title:"Number of days between the most recent and the oldest commit"},n.a.createElement("i",{className:"far fa-clock fa-fw","aria-hidden":"true"}),"\xa0 Age: ",this.state.agedays),n.a.createElement("li",{className:"list-group-item border-0 li-custom",title:"Number of distinct refatorings"},n.a.createElement("i",{className:"far fa-registered fa-fw","aria-hidden":"true"}),"\xa0 Distinct refactorings: ",this.state.refactorings)))}},{key:"renderError",value:function(){if(this.state.error)return n.a.createElement("div",{className:"col col-lg-12 text-center h5 error-msg"},n.a.createElement("p",null,"Refactoring subgraph not found. Back to ",n.a.createElement("a",{href:"",rel:"noopener noreferrer"}," homepage"),"."))}},{key:"renderExamples",value:function(){var e=this;if(!this.state.error)return n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col col-lg-12 text-center examples"},n.a.createElement("span",{className:"example-item"},"Examples:"),E.map((function(t,a){return n.a.createElement("a",{className:"example-item",href:"#/".concat(t.owner,"/").concat(t.project,"/").concat(t.id),key:a,onClick:function(){e.showGraph(t.owner,t.project,t.id)}},t.project)}))))}},{key:"render",value:function(){return n.a.createElement("div",{className:"container-fluid",id:"graph-div"},this.renderExamples(),n.a.createElement("div",{className:"row"},this.renderMenu(),this.renderGraph(),this.renderError()))}}]),a}(r.Component),y=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var r;Object(s.a)(this,a),r=t.call(this,e);var n=g.a.parse(r.props.location.search);return r.readData=r.readData.bind(Object(l.a)(r)),r.state={owner:e.match.params.owner,project:e.match.params.project,id:e.match.params.id,level:"",edges:[],commits:n.commits?n.commits.split(","):[]},r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e="/data/".concat(this.state.owner,"/").concat(this.state.project,"/subgraph_").concat(this.state.id,".json");this.readData(e)}},{key:"readData",value:function(e){var t=this;h.b().defer(h.a,e).await((function(e,a){e?t.setState({error:!0}):t.setState({edges:a.edges.sort((function(e,t){return(""+e.sha1).localeCompare(t.sha1)})),level:a.info.level,error:!1})}))}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"container-fluid"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-11 offset-md-1 table-custom"},n.a.createElement("table",{className:"table table-responsive"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{scope:"col"},"Edge ID"),n.a.createElement("th",{scope:"col"},"Commit"),n.a.createElement("th",{scope:"col"},"Refatoring"),n.a.createElement("th",{scope:"col"},"Entity Before"),n.a.createElement("th",{scope:"col"},"Entity After"))),n.a.createElement("tbody",null,this.state.edges.map((function(t,a){return n.a.createElement("tr",{key:a,className:e.state.commits.includes(t.sha1)?"alert alert-info":""},n.a.createElement("th",{scope:"row"},t.id),n.a.createElement("td",null,n.a.createElement("a",{key:a,href:"https://github.com/".concat(e.state.owner,"/").concat(e.state.project,"/commit/").concat(t.sha1),target:"_blank",rel:"noopener noreferrer"},t.sha1)),n.a.createElement("td",null,t.ref),n.a.createElement("td",null,t.before,t.lineB?" (line "+t.lineB+")":""),n.a.createElement("td",null,t.after,t.lineA?" (line "+t.lineA+")":""))})))))))}}]),a}(r.Component),j=a(64),N=a(2),k=function(){return n.a.createElement("header",null,n.a.createElement("div",{className:"navbar navbar-dark bg-dark"},n.a.createElement("a",{className:"navbar-brand",href:"/#"},"Refactoring Graph"),n.a.createElement("div",{className:"justify-content-end",title:"https://github.com/alinebrito/refactoring-graph"},n.a.createElement("a",{href:"https://github.com/alinebrito/refactoring-graph",target:"_blank",rel:"noopener noreferrer"},n.a.createElement("img",{width:"150",height:"25",alt:"GitHub stars",src:"https://img.shields.io/github/stars/alinebrito/refactoring-graph?label=GitHub%20|%20Stars&style=social"})))),n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"card-body border-0 card-nav"},n.a.createElement("p",{className:"text-center"},"Refactoring Graph is a data structure to assess refactorings over time. The vertices are methods/functions and the edges represent refactoring operations. ",n.a.createElement("b",null,"Hover the mouse over a vertice")," to see its name, and ",n.a.createElement("b",null,"click an edge")," to see the commit on GitHub."))))};var x=function(){return n.a.createElement("div",null,n.a.createElement(k,null),n.a.createElement(j.a,null,n.a.createElement("div",null,n.a.createElement(N.d,null,n.a.createElement(j.b,{basename:""},n.a.createElement(N.b,{exact:!0,path:"/:owner/:project/:id/info",component:y}),n.a.createElement(N.b,{exact:!0,path:"/:owner/:project/:id",component:w}),n.a.createElement(N.b,{exact:!0,path:"/"},n.a.createElement(N.a,{from:"/",exact:!0,to:"/elastic/elasticsearch/713"})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},76:function(e,t){},77:function(e,t){},94:function(e,t,a){e.exports=a(125)},99:function(e,t,a){}},[[94,1,2]]]);
//# sourceMappingURL=main.c8849c0f.chunk.js.map